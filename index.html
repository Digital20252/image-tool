<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="VgC9HVFPopnTNArY8lXte_gJo-GbSx0-lKTuQ6GeUKA" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online image compression tool. Optimize your JPEG, PNG, SVG, or GIF images with the best quality and compression. See the compression difference!">
    <meta name="keywords" content="image compression, optimize images, image compressor, reduce image size, web optimization, compression difference">
    <meta name="author" content="Your Name">
    <meta name="robots" content="index, follow">
    <title>Compress Image - Optimize Images Online</title>
    
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Compress Image - Optimize Images Online">
    <meta property="og:description" content="Compress and optimize your JPEG, PNG, SVG, or GIF images with the best quality and compression for free. See the compression difference!">
    <meta property="og:type" content="website">
    
    <!-- Styles -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f9f9f9;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            text-align: center;
            max-width: 800px; /* Wider container on desktop */
            width: 100%;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 10px;
            font-weight: bold;
        }

        p {
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .format-text {
            color: #007bff; /* Blue color for JPG, PNG, SVG, GIF */
            text-decoration: underline; /* Underline the text */
        }

        .ad-space {
            margin: 20px auto;
            min-height: 90px;
            background: #f5f5f5;
            border: 1px solid #ddd;555669566
            width: 100%;
            max-width: 900px; /* Wider ad spaces on desktop */
        }

        .controls {
            margin: 20px 0;
        }

        input[type="file"] {
            display: none;
        }

        .upload-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 30px; /* Wider button on desktop */
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px 0;
            width: 250px; /* Wider button on desktop */
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.3);
        }

        .upload-button:hover {
            background: #0056b3;
        }

        .upload-icons {
            display: flex;
            gap: 10px;
            margin-left: 10px;
        }

        .upload-icon {
            width: 20px;
            height: 20px;
            fill: white;
        }

        #compressionLevel {
            width: 100%;
            max-width: 400px; /* Wider slider on desktop */
            margin: 20px 0;
        }

        #imagePreview {
            max-width: 100%;
            margin: 20px 0;
            display: block; /* Show by default, managed by JS */
        }

        .download-section {
            display: none;
            margin: 20px 0;
        }

        .compression-difference {
            margin: 20px 0;
            color: #333;
            font-size: 1em;
        }

        button {
            padding: 12px 25px; /* Wider buttons on desktop */
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }

        /* Responsive Design for Mobile Phones */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 10px;
                max-width: 95%; /* Wider container on mobile */
            }
            
            .upload-button {
                width: 240px; /* Wider button on mobile */
                padding: 12px 30px; /* Match desktop width for consistency */
            }
            
            .ad-space {
                max-width: 100%;
            }

            #compressionLevel {
                max-width: 350px; /* Wider slider on mobile */
            }

            button {
                padding: 12px 25px; /* Maintain wider padding for buttons on mobile */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Compress IMAGE</h1>
        <p>Compress <span class="format-text">JPG, PNG, SVG, or GIF</span> with the best quality and compression. <br> Reduce the filesize of your images at once.</p>
        
        <!-- Top Ad Space (Note: AdSense requires valid publisher ID and slot) -->
        <div class="ad-space">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="YOUR_ADSENSE_PUBLISHER_ID"
                data-ad-slot="YOUR_AD_UNIT_ID"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="controls">
            <label for="imageInput" class="upload-button">
                Select images
                <div class="upload-icons">
                    <svg class="upload-icon" viewBox="0 0 24 24">
                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                    <svg class="upload-icon" viewBox="0 0 24 24">
                        <path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9z"/>
                    </svg>
                </div>
            </label>
            <input type="file" id="imageInput" accept="image/*">
            <p style="color: #666; font-size: 0.9em;">or drop images here</p>
            <div>
                <label for="compressionLevel">Compression Level: <span id="levelValue">50</span>%</label>
                <input type="range" id="compressionLevel" min="0" max="100" value="50">
            </div>
            <button onclick="compressImage()">Compress Image</button>
        </div>

        <img id="imagePreview" alt="Selected/Compressed image preview">
        
        <div class="download-section" id="downloadSection">
            <button onclick="downloadImage()">Download</button>
        </div>

        <div class="compression-difference" id="compressionDifference">
            <!-- Will display file size difference here -->
        </div>

        <!-- Bottom Ad Space (Note: AdSense requires valid publisher ID and slot) -->
        <div class="ad-space">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="YOUR_ADSENSE_PUBLISHER_ID"
                data-ad-slot="YOUR_AD_UNIT_ID"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>

    <script>
        let compressedImageData = null;
        let originalFileSize = 0;
        let originalImageData = null; // To store the original image data URL

        // Update compression level display
        document.getElementById('compressionLevel').addEventListener('input', function() {
            document.getElementById('levelValue').textContent = this.value;
        });

        // Handle file selection or drop to show original image
        document.getElementById('imageInput').addEventListener('change', handleImageSelect);
        const dropZone = document.querySelector('.container');

        function handleImageSelect(event) {
            const file = event.target.files[0] || event.dataTransfer.files[0];
            if (!file) {
                console.error('No file selected or dropped.');
                return;
            }

            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file (JPG, PNG, SVG, or GIF).');
                return;
            }

            // Store original file size in bytes
            originalFileSize = file.size;

            const img = new Image();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);

                // Store and show the original image as a preview
                originalImageData = canvas.toDataURL();
                document.getElementById('imagePreview').src = originalImageData;
                document.getElementById('imagePreview').style.display = 'block';
                document.getElementById('downloadSection').style.display = 'none'; // Hide download until compressed
                document.getElementById('compressionDifference').textContent = ''; // Clear any previous compression difference
                console.log('Original image loaded successfully.');
            };

            img.onerror = function() {
                console.error('Failed to load the image.');
                alert('Error loading the image. Please try a different file.');
            };

            img.src = URL.createObjectURL(file);
        }

        // Compress image function
        async function compressImage() {
            const compressionLevel = document.getElementById('compressionLevel').value;

            if (!originalImageData) {
                alert('Please select an image first!');
                console.error('No original image data available for compression.');
                return;
            }

            const img = new Image();
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);

                // Convert to compressed format
                const quality = (100 - compressionLevel) / 100; // Convert to 0-1 scale
                compressedImageData = canvas.toDataURL('image/jpeg', quality);
                
                // Update preview with compressed image
                const preview = document.getElementById('imagePreview');
                preview.src = compressedImageData;
                
                // Show download section
                document.getElementById('downloadSection').style.display = 'block';

                // Calculate and display compression difference
                showCompressionDifference();
                console.log('Image compressed successfully.');
            };

            img.onerror = function() {
                console.error('Failed to compress the image.');
                alert('Error compressing the image. Please try again.');
            };

            img.src = originalImageData; // Use the stored original image data
        }

        // Download compressed image
        function downloadImage() {
            if (!compressedImageData) {
                console.error('No compressed image data available for download.');
                alert('Please compress an image before downloading.');
                return;
            }

            try {
                // Create a Blob from the data URL
                const byteString = atob(compressedImageData.split(',')[1]);
                const mimeString = compressedImageData.split(',')[0].split(':')[1].split(';')[0];
                const ab = new ArrayBuffer(byteString.length);
                const ia = new Uint8Array(ab);
                for (let i = 0; i < byteString.length; i++) {
                    ia[i] = byteString.charCodeAt(i);
                }
                const blob = new Blob([ab], { type: mimeString });

                // Create a temporary URL and trigger download
                const url = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'compressed-image.jpg';
                document.body.appendChild(link);
                link.click();

                // Clean up and log success
                window.URL.revokeObjectURL(url);
                document.body.removeChild(link);
                console.log('Image downloaded successfully as compressed-image.jpg');
            } catch (error) {
                console.error('Download failed:', error);
                alert('Failed to download the image. Please try again or check your browser settings.');
            }
        }

        // Show compression difference
        function showCompressionDifference() {
            if (!compressedImageData || originalFileSize === 0) {
                console.error('No data available to show compression difference.');
                return;
            }

            // Calculate compressed file size (approximate, based on data URL length)
            const compressedSize = (compressedImageData.length * 3 / 4) - (compressedImageData.endsWith('==') ? 2 : compressedImageData.endsWith('=') ? 1 : 0);
            const sizeReduction = ((originalFileSize - compressedSize) / originalFileSize) * 100;

            // Format sizes in KB or MB
            const formatSize = (bytes) => {
                if (bytes >= 1048576) return (bytes / 1048576).toFixed(2) + ' MB';
                return (bytes / 1024).toFixed(2) + ' KB';
            };

            const differenceText = `Original Size: ${formatSize(originalFileSize)} | Compressed Size: ${formatSize(compressedSize)} | Reduction: ${sizeReduction.toFixed(2)}%`;
            document.getElementById('compressionDifference').textContent = differenceText;
            console.log('Compression difference displayed:', differenceText);
        }

        // Drag and drop functionality
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.backgroundColor = '#e9ecef';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.backgroundColor = 'white';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.backgroundColor = 'white';
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('imageInput').files = files;
                handleImageSelect(e); // Show original image on drop
                console.log('Image dropped successfully.');
            } else {
                console.error('No files dropped.');
            }
        });
    </script>
</body>
</html>
